<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Just The Two Of Us - Map</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
    #map { height: 500px; width: 100%; margin-bottom: 20px; }
    .places-container {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
    }
    .place {
      cursor: pointer;
      color: #0077cc;
      padding: 4px;
      border-bottom: 1px solid #ddd;
    }
    .place:hover { text-decoration: underline; }
    .place-number { font-weight: bold; margin-right: 4px; }
  </style>
</head>
<body>

<script>
  // Password protection
  let password = prompt("Enter the password to view the map:");
  if (password !== "march18") {
    document.body.innerHTML = "<h2>Access Denied</h2>";
    throw "Wrong password";
  }
</script>

<h2>Our Special Places</h2>
<div id="map"></div>

<h3>Click a place to zoom:</h3>
<div class="places-container" id="places-list"></div>

<script>
let map;

function initMap() {
  map = new google.maps.Map(document.getElementById("map"), {
    center: { lat: -31.9523, lng: 115.8613 },
    zoom: 12,
    styles: [
      {"featureType":"all","elementType":"labels","stylers":[{"visibility":"off"}]},
      {"featureType":"poi.park","elementType":"geometry.fill","stylers":[{"color":"#aadd55"}]},
      {"featureType":"road.highway","elementType":"labels","stylers":[{"visibility":"off"},{"hue":"#ff0000"}]},
      {"featureType":"road.arterial","elementType":"labels.text","stylers":[{"visibility":"on"}]},
      {"featureType":"road.local","elementType":"labels.text","stylers":[{"visibility":"on"}]},
      {"featureType":"water","elementType":"geometry.fill","stylers":[{"color":"#0099dd"}]}
    ]
  });

  loadPlaces();
}

// Fetch places from Google Sheets
async function loadPlaces() {
  const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSfGFuqglhR7Ss03-SJVzB_St46vLigoCEj6MOmJmSBsqg2SD0ebiTRt49IZ6jJnhYPlZtVBVpvX8ZG/pub?output=csv"; // Replace with your Sheet ID
  const res = await fetch(sheetURL);
  const text = await res.text();
  const rows = text.split("\n").slice(1); // skip header

  const places = rows.map(row => {
    const [title, lat, lng] = row.split(",");
    return { title, lat: parseFloat(lat), lng: parseFloat(lng) };
  });

  const listContainer = document.getElementById("places-list");

  places.forEach((place, index) => {
    // Add marker
    new google.maps.Marker({
      position: {lat: place.lat, lng: place.lng},
      map: map,
      label: { text: (index + 1).toString(), color: "white", fontWeight: "bold" },
      title: place.title
    });

    // Add clickable list item
    const div = document.createElement("div");
    div.className = "place";
    div.innerHTML = `<span class="place-number">${index + 1}</span>${place.title}`;
    div.onclick = () => {
      map.setCenter({lat: place.lat, lng: place.lng});
      map.setZoom(16);
    };
    listContainer.appendChild(div);
  });
}
</script>

<script async
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBdpysexDpYqUB9hUcHukcJnzNx7bAhtW8&callback=initMap">
</script>

</body>
</html>
